<form *ngIf="pkgInfo" (ngSubmit)="onSubmit()" #pkgForm="ngForm">
    <mat-accordion class="example-headers-align">
        <mat-expansion-panel [expanded]="step === 0" (opened)="setStep(0)" hideToggle>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    ID
                </mat-panel-title>
                <mat-panel-description>
                    Package ID
                    <mat-icon>fingerprint</mat-icon>
                </mat-panel-description>
            </mat-expansion-panel-header>

            <mat-form-field>
                <input matInput [(ngModel)]="pkgInfo.id" disabled name="pkgId" value="{{ pkgInfo.id }}" placeholder="ID">
            </mat-form-field>

            <mat-action-row>
                <button type="button" mat-button color="primary" (click)="nextStep()">Next</button>
            </mat-action-row>
        </mat-expansion-panel>

        <mat-expansion-panel [expanded]="step === 1" (opened)="setStep(1)" hideToggle>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    Recipient Information
                </mat-panel-title>
                <mat-panel-description>
                    Recipient and address
                    <mat-icon>account_circle</mat-icon>
                </mat-panel-description>
            </mat-expansion-panel-header>

            <mat-form-field>
                <input matInput [(ngModel)]="pkgInfo.recipient" name="pkgRecipient" [disabled]="recipientDisabled" value="{{ pkgInfo.recipient }}" placeholder="Recipient">
            </mat-form-field>

            <mat-form-field>
                <input matInput [(ngModel)]="pkgInfo.address" name="pkgAddress" [disabled]="addressDisabled" value="{{ pkgInfo.address }}" placeholder="Address">
            </mat-form-field>

            <mat-action-row>
                <button type="button" mat-button color="warn" (click)="prevStep()">Previous</button>
                <button type="button" mat-button color="primary" (click)="nextStep()">Next</button>
            </mat-action-row>
        </mat-expansion-panel>

        <mat-expansion-panel [expanded]="step === 2" (opened)="setStep(2)" hideToggle>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    Storage Information
                </mat-panel-title>
                <mat-panel-description>
                    Storage location, date & time in/out
                    <mat-icon>calendar_today</mat-icon>
                </mat-panel-description>
            </mat-expansion-panel-header>

            <mat-form-field>
                <input matInput [(ngModel)]="pkgInfo.location" name="pkgLocation" [disabled]="storageLocationDisabled" value="{{ pkgInfo.location }}" placeholder="Location">
            </mat-form-field>

            <mat-form-field>
                <input matInput [(ngModel)]="pkgInfo.dateTimeIn" name="pkgDateTimeIn" disabled value="{{ pkgInfo.dateTimeIn }}" placeholder="Date/time in">
            </mat-form-field>

            <mat-form-field>
                <input matInput [(ngModel)]="pkgInfo.dateTimeOut" name="pkgDateTimeOut" disabled value="{{ pkgInfo.dateTimeOut }}" placeholder="Date/time out">
            </mat-form-field>

            <mat-action-row>
                <button type="button" mat-button color="warn" (click)="prevStep()">Previous</button>
                <button type="button" mat-button color="primary" (click)="nextStep()">Next</button>
            </mat-action-row>
        </mat-expansion-panel>

        <mat-expansion-panel [expanded]="step === 3" (opened)="setStep(3)" hideToggle>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    Complete Text
                </mat-panel-title>
                <mat-panel-description>
                    Complete text of package label
                    <mat-icon>subject</mat-icon>
                </mat-panel-description>
            </mat-expansion-panel-header>

            <mat-form-field>
                <textarea matInput rows="6" [(ngModel)]="pkgInfo.completeText" name="pkgCompleteText" disabled value="{{ pkgInfo.completeText }}" placeholder="Complete text"></textarea>
            </mat-form-field>

            <mat-action-row>
                <button type="button" mat-button color="warn" (click)="prevStep()">Previous</button>
                <button type="button" mat-button color="primary" (click)="nextStep()">Next</button>
            </mat-action-row>
        </mat-expansion-panel>

        <mat-expansion-panel [expanded]="step === 4" (opened)="setStep(4)" hideToggle>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    Image
                </mat-panel-title>
                <mat-panel-description>
                    Uploaded package label
                    <mat-icon>camera_alt</mat-icon>
                </mat-panel-description>
            </mat-expansion-panel-header>

            <mat-form-field>
                <!-- make this the image itself -->
                <input matInput [(ngModel)]="pkgInfo.imageLoc" name="pkgImageLoc" disabled value="{{ pkgInfo.imageLoc }}" placeholder="Image">
            </mat-form-field>

            <mat-action-row>
                <button type="button" mat-button color="warn" (click)="prevStep()">Previous</button>
                <button type="button" mat-button color="primary" (click)="nextStep()">Next</button>
            </mat-action-row>
        </mat-expansion-panel>

        <mat-expansion-panel [expanded]="step === 5" (opened)="setStep(5)" hideToggle>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    Description
                </mat-panel-title>
                <mat-panel-description>
                    Description of the package
                    <mat-icon>create</mat-icon>
                </mat-panel-description>
            </mat-expansion-panel-header>

            <mat-form-field>
                <textarea matInput [(ngModel)]="pkgInfo.description" name="pkgDescription" [disabled]="descriptionDisabled" value="{{ pkgInfo.description }}" placeholder="Description"></textarea>
            </mat-form-field>

            <mat-action-row>
                <button type="button" mat-button color="warn" (click)="prevStep()">Previous</button>
                <button type="button" mat-button color="primary" (click)="nextStep()">End</button>
            </mat-action-row>
        </mat-expansion-panel>
    </mat-accordion>
    
    <div class="footer" *ngIf='finished'>
        <button *ngIf='recipientDisabled && !descriptionDisabled' type="submit" mat-raised-button>Update</button>
        <button *ngIf='!recipientDisabled' type="submit" mat-raised-button>Submit</button>    
        <span style="padding: 10px"></span>
        <button *ngIf="!checkOutDisabled" type="button" mat-raised-button (click)="openDialog()">Check out</button>
    </div>
</form>